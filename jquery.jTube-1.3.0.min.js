/**
* jQuery Youtube API Feed Plugin
* @author John Hoover <john@defvayne23.com>
* @version 1.3.0
*/
(function($){$.extend({jTube:function(f){var f=$.extend({user:'',userType:'uploads',search:'',feed:'',playlist:'',format:'flash',order:'published',time:'all_time',limit:5,page:1,success:function(a,b){},error:function(a){}},f);var g='http://gdata.youtube.com/feeds/';var h=this;var i='';if(f.user!='')g+='users/'+f.user+'/'+f.userType+'?';else if(f.search!='')g+='api/videos?q='+f.search+'&';else if(f.feed!='')g+='api/standardfeeds/'+f.feed+'?';else if(f.playlist!='')g+='api/playlists/'+f.playlist+'?';else{f.error("No feed choices given.");return false}g+='alt=json';g+='&max-results='+f.limit;g+='&start-index='+(((f.page*f.limit)-f.limit)+1);g+='&orderby='+f.order;g+='&time='+f.time;if(f.format=="mpeg")g+='&format=6';else if(f.format=="h263")g+='&format=1';else g+='&format=5';$.ajax({url:g,dataType:'json',success:function(d){var e=[];if(d!=null){$(d.feed.entry).each(function(){videoId=$(this.id.$t.split('/'));videoId=videoId[videoId.length-1];var b=[];$(this.category).each(function(a){if(a!=0){b[a-1]=this.term}});var c={title:this.title.$t,description:this.media$group.media$description.$t,link:this.link[0].href,categories:b,author:{name:this.author[0].name.$t,link:this.author[0].uri.$t},thumbnail:this.media$group.media$thumbnail[3].url};videoFormats=[];$(this.media$group.media$content).each(function(){videoFormats[this.yt$format]=this.url});if(f.format=="mpeg")c.video=videoFormats[6];else if(f.format=="h263")c.video=videoFormats[1];else c.video=videoFormats[5];if(this.published){published=this.published.$t.match(/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})/);meridiem="pm";hour=published[4];if(hour<12){meridiem="am"}else{if(hour>12)hour=hour-12}c.published={year:published[1],month:published[2],day:published[3],hour:hour,minute:published[5],seconds:published[6],meridiem:meridiem}}if(this.media$group.yt$duration.seconds){duration=this.media$group.yt$duration.seconds;hours=0;minutes=0;seconds=0;while(duration>=3600){hours=hours+1;duration=duration-3600}while(duration>=60){minutes=minutes+1;duration=duration-60}seconds=duration;if(seconds<10)seconds='0'+seconds;c.length=minutes+':'+seconds;if(hours>0)c.length=hours+':'+c.length}if(this.yt$statistics)c.views=this.yt$statistics.viewCount;e[e.length]=c});pages=Math.ceil(d.feed.openSearch$totalResults.$t/f.limit);f.success(e,pages)}else{f.error("Bad request.")}}});return this},jTubeEmbed:function(a,b){var b=$.extend({width:290,height:250,autoplay:true,fullscreeen:false,related:true,loop:false,keyboard:true,genie:false,border:false,highdef:true,start:0},b);var c=a+"?";c+='autoplay='+(b.autoPlay?1:0);c+='&fs='+(b.fullscreen?1:0);c+='&rl=1'+(b.related?1:0);c+='&loop=1'+(b.loop?1:0);c+='&disablekb=0'+(b.keyboard?0:1);c+='&egm=1'+(b.genie?1:0);c+='&border=1'+(b.border?1:0);c+='&hd=1'+(b.highdef?1:0);c+='&start='+b.start;var d='<object width="'+b.width+'" height="'+b.height+'">';d+='<param name="movie" value="'+c+'"</param>';d+='<param name="allowScriptAccess" value="always"></param>';if(b.fullscreen==true)d+='<param name="allowFullScreen" value="true"></param>';d+='<embed src="'+c+'"';d+='    type="application/x-shockwave-flash"';if(b.fullscreen==true)d+='    allowfullscreen="true"';d+='    allowscriptaccess="always"';d+='    width="'+b.width+'" height="'+b.height+'">';d+='    </embed>';d+='</object>';return d}})})(jQuery);